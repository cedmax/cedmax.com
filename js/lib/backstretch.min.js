(function(a){a.backstretch=function(b,q,p){var l={centeredX:true,centeredY:true,speed:0,align:"left"},e=a("#backstretch"),g=e.data("settings")||l,h=e.data("settings"),c=("onorientationchange" in window)?a(document):a(window),f,d,k,j,o,n;if(q&&typeof q=="object"){a.extend(g,q)}a("body").addClass("backstretch-"+g.align);if(q&&typeof q=="function"){p=q}a(document).ready(m);return this;function m(){if(b){var r;if(e.length==0){var s={top:0,position:"fixed",overflow:"hidden",zIndex:-999999,margin:0,padding:0,height:"100%",width:"100%"};s[g.align]=0;e=a("<div />").attr("id","backstretch").css(s)}else{e.find("img").addClass("deleteable")}r=a("<img />").css({position:"absolute",display:"none",margin:0,padding:0,border:"none",zIndex:-999999}).bind("load",function(w){var v=a(this),u,t;v.css({width:"auto",height:"auto"});u=this.width||a(w.target).width();t=this.height||a(w.target).height();f=u/t;i(function(){v.fadeIn(g.speed,function(){e.find(".deleteable").remove();if(typeof p=="function"){p()}})})}).appendTo(e);if(a("body #backstretch").length==0){a("body").append(e)}e.data("settings",g);r.attr("src",b);a(window).resize(i)}}function i(s){try{n={top:0};n[g.align]=0;k=c.width();j=k/f;if(j>=c.height()){o=(j-c.height())/2;if(g.centeredY){a.extend(n,{top:"-"+o+"px"})}}else{j=c.height();k=j*f;o=(k-c.width())/2;if(g.centeredX){var r={};r[g.align]="-"+o+"px";a.extend(n,r)}}a("#backstretch, #backstretch img:not(.deleteable)").width(k).height(j).filter("img").css(n)}catch(t){}if(typeof s=="function"){s()}}}})(jQuery);